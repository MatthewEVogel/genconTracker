// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init


datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id        String   @id @default(uuid())
  name      String   @unique
  createdAt DateTime @default(now())
  userEvents UserEvent[]
}

model Event {
  id                String   @id // Game ID from TSV
  title             String
  shortDescription  String?
  eventType         String?
  gameSystem        String?
  startDateTime     String?
  duration          String?
  endDateTime       String?
  ageRequired       String?
  experienceRequired String?
  materialsRequired String?
  cost              String?
  location          String?
  ticketsAvailable  Int?
  createdAt         DateTime @default(now())
  userEvents        UserEvent[]
}

model UserEvent {
  id        String   @id @default(uuid())
  userId    String
  eventId   String
  createdAt DateTime @default(now())
  
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  event     Event    @relation(fields: [eventId], references: [id], onDelete: Cascade)
  
  @@unique([userId, eventId])
}
