"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/events";
exports.ids = ["pages/api/events"];
exports.modules = {

/***/ "(api-node)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n// Import the PrismaClient from the generated Prisma package\n\n// Define a custom type for globalThis to include our Prisma instance\nconst globalForPrisma = globalThis;\n// Create (or reuse) a single PrismaClient instance\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient(); // use existing or create new\n// In development, store the PrismaClient on globalThis to reuse between reloads\nif (true) {\n    globalForPrisma.prisma = prisma;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9wcmlzbWEudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsNERBQTREO0FBQ2Q7QUFFOUMscUVBQXFFO0FBQ3JFLE1BQU1DLGtCQUFrQkM7QUFJeEIsbURBQW1EO0FBQzVDLE1BQU1DLFNBQ1hGLGdCQUFnQkUsTUFBTSxJQUFJLElBQUlILHdEQUFZQSxHQUFHLENBQUMsNkJBQTZCO0FBRTdFLGdGQUFnRjtBQUNoRixJQUFJSSxJQUFxQyxFQUFFO0lBQ3pDSCxnQkFBZ0JFLE1BQU0sR0FBR0E7QUFDM0IiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcc2NvdXRcXFZTQ29kZSBwcm9qZWN0c1xcR2VuY29uVHJhY2tlclxcbGliXFxwcmlzbWEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0IHRoZSBQcmlzbWFDbGllbnQgZnJvbSB0aGUgZ2VuZXJhdGVkIFByaXNtYSBwYWNrYWdlXHJcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xyXG5cclxuLy8gRGVmaW5lIGEgY3VzdG9tIHR5cGUgZm9yIGdsb2JhbFRoaXMgdG8gaW5jbHVkZSBvdXIgUHJpc21hIGluc3RhbmNlXHJcbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyB7XHJcbiAgcHJpc21hOiBQcmlzbWFDbGllbnQgfCB1bmRlZmluZWQ7IC8vIG9wdGlvbmFsIFByaXNtYSBpbnN0YW5jZSBvbiBnbG9iYWwgb2JqZWN0XHJcbn07XHJcblxyXG4vLyBDcmVhdGUgKG9yIHJldXNlKSBhIHNpbmdsZSBQcmlzbWFDbGllbnQgaW5zdGFuY2VcclxuZXhwb3J0IGNvbnN0IHByaXNtYSA9XHJcbiAgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA/PyBuZXcgUHJpc21hQ2xpZW50KCk7IC8vIHVzZSBleGlzdGluZyBvciBjcmVhdGUgbmV3XHJcblxyXG4vLyBJbiBkZXZlbG9wbWVudCwgc3RvcmUgdGhlIFByaXNtYUNsaWVudCBvbiBnbG9iYWxUaGlzIHRvIHJldXNlIGJldHdlZW4gcmVsb2Fkc1xyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XHJcbiAgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTtcclxufVxyXG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsVGhpcyIsInByaXNtYSIsInByb2Nlc3MiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./lib/prisma.ts\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fevents&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cevents.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fevents&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cevents.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_events_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\events.ts */ \"(api-node)/./pages/api/events.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_events_ts__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_events_ts__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/events\",\n        pathname: \"/api/events\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_events_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGZXZlbnRzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUNldmVudHMudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ0U7QUFDMUQ7QUFDb0Q7QUFDcEQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLGlEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxpREFBUTtBQUNwQztBQUNPLHdCQUF3Qix5R0FBbUI7QUFDbEQ7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxldmVudHMudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgJ2RlZmF1bHQnKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsICdjb25maWcnKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2V2ZW50c1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2V2ZW50c1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6ICcnLFxuICAgICAgICBmaWxlbmFtZTogJydcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fevents&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cevents.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/events.ts":
/*!*****************************!*\
  !*** ./pages/api/events.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/prisma */ \"(api-node)/./lib/prisma.ts\");\n\nasync function handler(req, res) {\n    if (req.method === 'GET') {\n        try {\n            const page = parseInt(req.query.page) || 1;\n            const limit = parseInt(req.query.limit) || 100;\n            const day = req.query.day;\n            const search = req.query.search;\n            const startTime = req.query.startTime;\n            const endTime = req.query.endTime;\n            const ageRatings = req.query.ageRatings;\n            const eventTypes = req.query.eventTypes;\n            const maxParticipants = req.query.maxParticipants;\n            const skip = (page - 1) * limit;\n            // If any filtering is applied, we need to get all events first, filter them, then paginate\n            const hasFilters = day && day !== 'All Days' || search || startTime || endTime || ageRatings || eventTypes || maxParticipants;\n            if (hasFilters) {\n                // Get all events to filter\n                const allEvents = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.event.findMany({\n                    orderBy: {\n                        startDateTime: 'asc'\n                    },\n                    select: {\n                        id: true,\n                        title: true,\n                        shortDescription: true,\n                        eventType: true,\n                        gameSystem: true,\n                        startDateTime: true,\n                        duration: true,\n                        endDateTime: true,\n                        ageRequired: true,\n                        experienceRequired: true,\n                        materialsRequired: true,\n                        cost: true,\n                        location: true,\n                        ticketsAvailable: true\n                    }\n                });\n                let filteredEvents = allEvents;\n                // Filter by search term\n                if (search && search.trim()) {\n                    const searchTerm = search.toLowerCase().trim();\n                    filteredEvents = filteredEvents.filter((event)=>event.title.toLowerCase().includes(searchTerm) || event.shortDescription && event.shortDescription.toLowerCase().includes(searchTerm) || event.eventType && event.eventType.toLowerCase().includes(searchTerm) || event.gameSystem && event.gameSystem.toLowerCase().includes(searchTerm) || event.id.toLowerCase().includes(searchTerm));\n                }\n                // Filter by day\n                if (day && day !== 'All Days') {\n                    filteredEvents = filteredEvents.filter((event)=>{\n                        if (!event.startDateTime) return false;\n                        try {\n                            const eventDate = new Date(event.startDateTime);\n                            const dayOfWeek = eventDate.toLocaleDateString('en-US', {\n                                weekday: 'long'\n                            });\n                            return dayOfWeek === day;\n                        } catch  {\n                            return false;\n                        }\n                    });\n                }\n                // Filter by start time\n                if (startTime && startTime.trim()) {\n                    filteredEvents = filteredEvents.filter((event)=>{\n                        if (!event.startDateTime) return false;\n                        try {\n                            const eventDate = new Date(event.startDateTime);\n                            const eventTime = eventDate.toLocaleTimeString('en-US', {\n                                hour12: false,\n                                hour: '2-digit',\n                                minute: '2-digit'\n                            });\n                            return eventTime >= startTime.trim();\n                        } catch  {\n                            return false;\n                        }\n                    });\n                }\n                // Filter by end time\n                if (endTime && endTime.trim()) {\n                    filteredEvents = filteredEvents.filter((event)=>{\n                        if (!event.endDateTime) return false;\n                        try {\n                            const eventDate = new Date(event.endDateTime);\n                            const eventTime = eventDate.toLocaleTimeString('en-US', {\n                                hour12: false,\n                                hour: '2-digit',\n                                minute: '2-digit'\n                            });\n                            return eventTime <= endTime.trim();\n                        } catch  {\n                            return false;\n                        }\n                    });\n                }\n                // Filter by age ratings\n                if (ageRatings && ageRatings.trim()) {\n                    const selectedAgeRatings = ageRatings.split(',').map((rating)=>rating.trim());\n                    filteredEvents = filteredEvents.filter((event)=>{\n                        if (!event.ageRequired) return selectedAgeRatings.includes('Not Specified');\n                        return selectedAgeRatings.some((rating)=>event.ageRequired && event.ageRequired.toLowerCase().includes(rating.toLowerCase()));\n                    });\n                }\n                // Filter by event types\n                if (eventTypes && eventTypes.trim()) {\n                    const selectedEventTypes = eventTypes.split(',').map((type)=>type.trim());\n                    filteredEvents = filteredEvents.filter((event)=>{\n                        if (!event.eventType) return selectedEventTypes.includes('Not Specified');\n                        return selectedEventTypes.some((type)=>event.eventType && event.eventType.toLowerCase().includes(type.toLowerCase()));\n                    });\n                }\n                // Filter by max participants\n                if (maxParticipants && maxParticipants.trim()) {\n                    const maxParticipantsNum = parseInt(maxParticipants.trim());\n                    if (!isNaN(maxParticipantsNum)) {\n                        filteredEvents = filteredEvents.filter((event)=>{\n                            if (!event.ticketsAvailable) return false;\n                            return event.ticketsAvailable <= maxParticipantsNum;\n                        });\n                    }\n                }\n                // Apply pagination to filtered results\n                const totalEvents = filteredEvents.length;\n                const paginatedEvents = filteredEvents.slice(skip, skip + limit);\n                const totalPages = Math.ceil(totalEvents / limit);\n                return res.status(200).json({\n                    events: paginatedEvents,\n                    pagination: {\n                        currentPage: page,\n                        totalPages,\n                        totalEvents,\n                        hasNextPage: page < totalPages,\n                        hasPrevPage: page > 1\n                    }\n                });\n            } else {\n                // For \"All Days\" with no filters, use regular database pagination\n                const totalEvents = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.event.count();\n                const events = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.event.findMany({\n                    skip,\n                    take: limit,\n                    orderBy: {\n                        startDateTime: 'asc'\n                    },\n                    select: {\n                        id: true,\n                        title: true,\n                        shortDescription: true,\n                        eventType: true,\n                        gameSystem: true,\n                        startDateTime: true,\n                        duration: true,\n                        endDateTime: true,\n                        ageRequired: true,\n                        experienceRequired: true,\n                        materialsRequired: true,\n                        cost: true,\n                        location: true,\n                        ticketsAvailable: true\n                    }\n                });\n                const totalPages = Math.ceil(totalEvents / limit);\n                return res.status(200).json({\n                    events,\n                    pagination: {\n                        currentPage: page,\n                        totalPages,\n                        totalEvents,\n                        hasNextPage: page < totalPages,\n                        hasPrevPage: page > 1\n                    }\n                });\n            }\n        } catch (error) {\n            console.error('Error fetching events:', error);\n            res.status(500).json({\n                error: 'Internal server error'\n            });\n        }\n    } else {\n        res.setHeader('Allow', [\n            'GET'\n        ]);\n        res.status(405).json({\n            error: `Method ${req.method} not allowed`\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUM7WUFBRVEsT0FBTyxDQUFDLE9BQU8sRUFBRTVFLElBQUlFLE1BQU0sQ0FBQyxZQUFZLENBQUM7UUFBQztJQUNuRTtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXHNjb3V0XFxWU0NvZGUgcHJvamVjdHNcXEdlbmNvblRyYWNrZXJcXHBhZ2VzXFxhcGlcXGV2ZW50cy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XHJcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvbGliL3ByaXNtYSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKFxyXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXHJcbiAgcmVzOiBOZXh0QXBpUmVzcG9uc2VcclxuKSB7XHJcbiAgaWYgKHJlcS5tZXRob2QgPT09ICdHRVQnKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBwYWdlID0gcGFyc2VJbnQocmVxLnF1ZXJ5LnBhZ2UgYXMgc3RyaW5nKSB8fCAxO1xyXG4gICAgICBjb25zdCBsaW1pdCA9IHBhcnNlSW50KHJlcS5xdWVyeS5saW1pdCBhcyBzdHJpbmcpIHx8IDEwMDtcclxuICAgICAgY29uc3QgZGF5ID0gcmVxLnF1ZXJ5LmRheSBhcyBzdHJpbmc7XHJcbiAgICAgIGNvbnN0IHNlYXJjaCA9IHJlcS5xdWVyeS5zZWFyY2ggYXMgc3RyaW5nO1xyXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSByZXEucXVlcnkuc3RhcnRUaW1lIGFzIHN0cmluZztcclxuICAgICAgY29uc3QgZW5kVGltZSA9IHJlcS5xdWVyeS5lbmRUaW1lIGFzIHN0cmluZztcclxuICAgICAgY29uc3QgYWdlUmF0aW5ncyA9IHJlcS5xdWVyeS5hZ2VSYXRpbmdzIGFzIHN0cmluZztcclxuICAgICAgY29uc3QgZXZlbnRUeXBlcyA9IHJlcS5xdWVyeS5ldmVudFR5cGVzIGFzIHN0cmluZztcclxuICAgICAgY29uc3QgbWF4UGFydGljaXBhbnRzID0gcmVxLnF1ZXJ5Lm1heFBhcnRpY2lwYW50cyBhcyBzdHJpbmc7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBza2lwID0gKHBhZ2UgLSAxKSAqIGxpbWl0O1xyXG4gICAgICBcclxuICAgICAgLy8gSWYgYW55IGZpbHRlcmluZyBpcyBhcHBsaWVkLCB3ZSBuZWVkIHRvIGdldCBhbGwgZXZlbnRzIGZpcnN0LCBmaWx0ZXIgdGhlbSwgdGhlbiBwYWdpbmF0ZVxyXG4gICAgICBjb25zdCBoYXNGaWx0ZXJzID0gKGRheSAmJiBkYXkgIT09ICdBbGwgRGF5cycpIHx8IHNlYXJjaCB8fCBzdGFydFRpbWUgfHwgZW5kVGltZSB8fCBhZ2VSYXRpbmdzIHx8IGV2ZW50VHlwZXMgfHwgbWF4UGFydGljaXBhbnRzO1xyXG4gICAgICBcclxuICAgICAgaWYgKGhhc0ZpbHRlcnMpIHtcclxuICAgICAgICAvLyBHZXQgYWxsIGV2ZW50cyB0byBmaWx0ZXJcclxuICAgICAgICBjb25zdCBhbGxFdmVudHMgPSBhd2FpdCBwcmlzbWEuZXZlbnQuZmluZE1hbnkoe1xyXG4gICAgICAgICAgb3JkZXJCeToge1xyXG4gICAgICAgICAgICBzdGFydERhdGVUaW1lOiAnYXNjJ1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgICAgICBpZDogdHJ1ZSxcclxuICAgICAgICAgICAgdGl0bGU6IHRydWUsXHJcbiAgICAgICAgICAgIHNob3J0RGVzY3JpcHRpb246IHRydWUsXHJcbiAgICAgICAgICAgIGV2ZW50VHlwZTogdHJ1ZSxcclxuICAgICAgICAgICAgZ2FtZVN5c3RlbTogdHJ1ZSxcclxuICAgICAgICAgICAgc3RhcnREYXRlVGltZTogdHJ1ZSxcclxuICAgICAgICAgICAgZHVyYXRpb246IHRydWUsXHJcbiAgICAgICAgICAgIGVuZERhdGVUaW1lOiB0cnVlLFxyXG4gICAgICAgICAgICBhZ2VSZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICAgICAgZXhwZXJpZW5jZVJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICBtYXRlcmlhbHNSZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICAgICAgY29zdDogdHJ1ZSxcclxuICAgICAgICAgICAgbG9jYXRpb246IHRydWUsXHJcbiAgICAgICAgICAgIHRpY2tldHNBdmFpbGFibGU6IHRydWUsXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBmaWx0ZXJlZEV2ZW50cyA9IGFsbEV2ZW50cztcclxuXHJcbiAgICAgICAgLy8gRmlsdGVyIGJ5IHNlYXJjaCB0ZXJtXHJcbiAgICAgICAgaWYgKHNlYXJjaCAmJiBzZWFyY2gudHJpbSgpKSB7XHJcbiAgICAgICAgICBjb25zdCBzZWFyY2hUZXJtID0gc2VhcmNoLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xyXG4gICAgICAgICAgZmlsdGVyZWRFdmVudHMgPSBmaWx0ZXJlZEV2ZW50cy5maWx0ZXIoZXZlbnQgPT4gXHJcbiAgICAgICAgICAgIGV2ZW50LnRpdGxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoVGVybSkgfHxcclxuICAgICAgICAgICAgKGV2ZW50LnNob3J0RGVzY3JpcHRpb24gJiYgZXZlbnQuc2hvcnREZXNjcmlwdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRlcm0pKSB8fFxyXG4gICAgICAgICAgICAoZXZlbnQuZXZlbnRUeXBlICYmIGV2ZW50LmV2ZW50VHlwZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRlcm0pKSB8fFxyXG4gICAgICAgICAgICAoZXZlbnQuZ2FtZVN5c3RlbSAmJiBldmVudC5nYW1lU3lzdGVtLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoVGVybSkpIHx8XHJcbiAgICAgICAgICAgIGV2ZW50LmlkLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoVGVybSlcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGaWx0ZXIgYnkgZGF5XHJcbiAgICAgICAgaWYgKGRheSAmJiBkYXkgIT09ICdBbGwgRGF5cycpIHtcclxuICAgICAgICAgIGZpbHRlcmVkRXZlbnRzID0gZmlsdGVyZWRFdmVudHMuZmlsdGVyKGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgaWYgKCFldmVudC5zdGFydERhdGVUaW1lKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgZXZlbnREYXRlID0gbmV3IERhdGUoZXZlbnQuc3RhcnREYXRlVGltZSk7XHJcbiAgICAgICAgICAgICAgY29uc3QgZGF5T2ZXZWVrID0gZXZlbnREYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tVVMnLCB7IHdlZWtkYXk6ICdsb25nJyB9KTtcclxuICAgICAgICAgICAgICByZXR1cm4gZGF5T2ZXZWVrID09PSBkYXk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGaWx0ZXIgYnkgc3RhcnQgdGltZVxyXG4gICAgICAgIGlmIChzdGFydFRpbWUgJiYgc3RhcnRUaW1lLnRyaW0oKSkge1xyXG4gICAgICAgICAgZmlsdGVyZWRFdmVudHMgPSBmaWx0ZXJlZEV2ZW50cy5maWx0ZXIoZXZlbnQgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWV2ZW50LnN0YXJ0RGF0ZVRpbWUpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICBjb25zdCBldmVudERhdGUgPSBuZXcgRGF0ZShldmVudC5zdGFydERhdGVUaW1lKTtcclxuICAgICAgICAgICAgICBjb25zdCBldmVudFRpbWUgPSBldmVudERhdGUudG9Mb2NhbGVUaW1lU3RyaW5nKCdlbi1VUycsIHsgXHJcbiAgICAgICAgICAgICAgICBob3VyMTI6IGZhbHNlLCBcclxuICAgICAgICAgICAgICAgIGhvdXI6ICcyLWRpZ2l0JywgXHJcbiAgICAgICAgICAgICAgICBtaW51dGU6ICcyLWRpZ2l0JyBcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICByZXR1cm4gZXZlbnRUaW1lID49IHN0YXJ0VGltZS50cmltKCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGaWx0ZXIgYnkgZW5kIHRpbWVcclxuICAgICAgICBpZiAoZW5kVGltZSAmJiBlbmRUaW1lLnRyaW0oKSkge1xyXG4gICAgICAgICAgZmlsdGVyZWRFdmVudHMgPSBmaWx0ZXJlZEV2ZW50cy5maWx0ZXIoZXZlbnQgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWV2ZW50LmVuZERhdGVUaW1lKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgZXZlbnREYXRlID0gbmV3IERhdGUoZXZlbnQuZW5kRGF0ZVRpbWUpO1xyXG4gICAgICAgICAgICAgIGNvbnN0IGV2ZW50VGltZSA9IGV2ZW50RGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcoJ2VuLVVTJywgeyBcclxuICAgICAgICAgICAgICAgIGhvdXIxMjogZmFsc2UsIFxyXG4gICAgICAgICAgICAgICAgaG91cjogJzItZGlnaXQnLCBcclxuICAgICAgICAgICAgICAgIG1pbnV0ZTogJzItZGlnaXQnIFxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIHJldHVybiBldmVudFRpbWUgPD0gZW5kVGltZS50cmltKCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGaWx0ZXIgYnkgYWdlIHJhdGluZ3NcclxuICAgICAgICBpZiAoYWdlUmF0aW5ncyAmJiBhZ2VSYXRpbmdzLnRyaW0oKSkge1xyXG4gICAgICAgICAgY29uc3Qgc2VsZWN0ZWRBZ2VSYXRpbmdzID0gYWdlUmF0aW5ncy5zcGxpdCgnLCcpLm1hcChyYXRpbmcgPT4gcmF0aW5nLnRyaW0oKSk7XHJcbiAgICAgICAgICBmaWx0ZXJlZEV2ZW50cyA9IGZpbHRlcmVkRXZlbnRzLmZpbHRlcihldmVudCA9PiB7XHJcbiAgICAgICAgICAgIGlmICghZXZlbnQuYWdlUmVxdWlyZWQpIHJldHVybiBzZWxlY3RlZEFnZVJhdGluZ3MuaW5jbHVkZXMoJ05vdCBTcGVjaWZpZWQnKTtcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkQWdlUmF0aW5ncy5zb21lKHJhdGluZyA9PiBcclxuICAgICAgICAgICAgICBldmVudC5hZ2VSZXF1aXJlZCAmJiBldmVudC5hZ2VSZXF1aXJlZC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHJhdGluZy50b0xvd2VyQ2FzZSgpKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGaWx0ZXIgYnkgZXZlbnQgdHlwZXNcclxuICAgICAgICBpZiAoZXZlbnRUeXBlcyAmJiBldmVudFR5cGVzLnRyaW0oKSkge1xyXG4gICAgICAgICAgY29uc3Qgc2VsZWN0ZWRFdmVudFR5cGVzID0gZXZlbnRUeXBlcy5zcGxpdCgnLCcpLm1hcCh0eXBlID0+IHR5cGUudHJpbSgpKTtcclxuICAgICAgICAgIGZpbHRlcmVkRXZlbnRzID0gZmlsdGVyZWRFdmVudHMuZmlsdGVyKGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgaWYgKCFldmVudC5ldmVudFR5cGUpIHJldHVybiBzZWxlY3RlZEV2ZW50VHlwZXMuaW5jbHVkZXMoJ05vdCBTcGVjaWZpZWQnKTtcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkRXZlbnRUeXBlcy5zb21lKHR5cGUgPT4gXHJcbiAgICAgICAgICAgICAgZXZlbnQuZXZlbnRUeXBlICYmIGV2ZW50LmV2ZW50VHlwZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHR5cGUudG9Mb3dlckNhc2UoKSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRmlsdGVyIGJ5IG1heCBwYXJ0aWNpcGFudHNcclxuICAgICAgICBpZiAobWF4UGFydGljaXBhbnRzICYmIG1heFBhcnRpY2lwYW50cy50cmltKCkpIHtcclxuICAgICAgICAgIGNvbnN0IG1heFBhcnRpY2lwYW50c051bSA9IHBhcnNlSW50KG1heFBhcnRpY2lwYW50cy50cmltKCkpO1xyXG4gICAgICAgICAgaWYgKCFpc05hTihtYXhQYXJ0aWNpcGFudHNOdW0pKSB7XHJcbiAgICAgICAgICAgIGZpbHRlcmVkRXZlbnRzID0gZmlsdGVyZWRFdmVudHMuZmlsdGVyKGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgICBpZiAoIWV2ZW50LnRpY2tldHNBdmFpbGFibGUpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICByZXR1cm4gZXZlbnQudGlja2V0c0F2YWlsYWJsZSA8PSBtYXhQYXJ0aWNpcGFudHNOdW07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQXBwbHkgcGFnaW5hdGlvbiB0byBmaWx0ZXJlZCByZXN1bHRzXHJcbiAgICAgICAgY29uc3QgdG90YWxFdmVudHMgPSBmaWx0ZXJlZEV2ZW50cy5sZW5ndGg7XHJcbiAgICAgICAgY29uc3QgcGFnaW5hdGVkRXZlbnRzID0gZmlsdGVyZWRFdmVudHMuc2xpY2Uoc2tpcCwgc2tpcCArIGxpbWl0KTtcclxuICAgICAgICBjb25zdCB0b3RhbFBhZ2VzID0gTWF0aC5jZWlsKHRvdGFsRXZlbnRzIC8gbGltaXQpO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBcclxuICAgICAgICAgIGV2ZW50czogcGFnaW5hdGVkRXZlbnRzLFxyXG4gICAgICAgICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICAgICAgICBjdXJyZW50UGFnZTogcGFnZSxcclxuICAgICAgICAgICAgdG90YWxQYWdlcyxcclxuICAgICAgICAgICAgdG90YWxFdmVudHMsXHJcbiAgICAgICAgICAgIGhhc05leHRQYWdlOiBwYWdlIDwgdG90YWxQYWdlcyxcclxuICAgICAgICAgICAgaGFzUHJldlBhZ2U6IHBhZ2UgPiAxXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gRm9yIFwiQWxsIERheXNcIiB3aXRoIG5vIGZpbHRlcnMsIHVzZSByZWd1bGFyIGRhdGFiYXNlIHBhZ2luYXRpb25cclxuICAgICAgICBjb25zdCB0b3RhbEV2ZW50cyA9IGF3YWl0IHByaXNtYS5ldmVudC5jb3VudCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGV2ZW50cyA9IGF3YWl0IHByaXNtYS5ldmVudC5maW5kTWFueSh7XHJcbiAgICAgICAgICBza2lwLFxyXG4gICAgICAgICAgdGFrZTogbGltaXQsXHJcbiAgICAgICAgICBvcmRlckJ5OiB7XHJcbiAgICAgICAgICAgIHN0YXJ0RGF0ZVRpbWU6ICdhc2MnXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgICAgIGlkOiB0cnVlLFxyXG4gICAgICAgICAgICB0aXRsZTogdHJ1ZSxcclxuICAgICAgICAgICAgc2hvcnREZXNjcmlwdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgZXZlbnRUeXBlOiB0cnVlLFxyXG4gICAgICAgICAgICBnYW1lU3lzdGVtOiB0cnVlLFxyXG4gICAgICAgICAgICBzdGFydERhdGVUaW1lOiB0cnVlLFxyXG4gICAgICAgICAgICBkdXJhdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgZW5kRGF0ZVRpbWU6IHRydWUsXHJcbiAgICAgICAgICAgIGFnZVJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICBleHBlcmllbmNlUmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIG1hdGVyaWFsc1JlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICBjb3N0OiB0cnVlLFxyXG4gICAgICAgICAgICBsb2NhdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgdGlja2V0c0F2YWlsYWJsZTogdHJ1ZSxcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgdG90YWxQYWdlcyA9IE1hdGguY2VpbCh0b3RhbEV2ZW50cyAvIGxpbWl0KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgXHJcbiAgICAgICAgICBldmVudHMsXHJcbiAgICAgICAgICBwYWdpbmF0aW9uOiB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRQYWdlOiBwYWdlLFxyXG4gICAgICAgICAgICB0b3RhbFBhZ2VzLFxyXG4gICAgICAgICAgICB0b3RhbEV2ZW50cyxcclxuICAgICAgICAgICAgaGFzTmV4dFBhZ2U6IHBhZ2UgPCB0b3RhbFBhZ2VzLFxyXG4gICAgICAgICAgICBoYXNQcmV2UGFnZTogcGFnZSA+IDFcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgZXZlbnRzOicsIGVycm9yKTtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIHJlcy5zZXRIZWFkZXIoJ0FsbG93JywgWydHRVQnXSk7XHJcbiAgICByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiBgTWV0aG9kICR7cmVxLm1ldGhvZH0gbm90IGFsbG93ZWRgIH0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsicHJpc21hIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInBhZ2UiLCJwYXJzZUludCIsInF1ZXJ5IiwibGltaXQiLCJkYXkiLCJzZWFyY2giLCJzdGFydFRpbWUiLCJlbmRUaW1lIiwiYWdlUmF0aW5ncyIsImV2ZW50VHlwZXMiLCJtYXhQYXJ0aWNpcGFudHMiLCJza2lwIiwiaGFzRmlsdGVycyIsImFsbEV2ZW50cyIsImV2ZW50IiwiZmluZE1hbnkiLCJvcmRlckJ5Iiwic3RhcnREYXRlVGltZSIsInNlbGVjdCIsImlkIiwidGl0bGUiLCJzaG9ydERlc2NyaXB0aW9uIiwiZXZlbnRUeXBlIiwiZ2FtZVN5c3RlbSIsImR1cmF0aW9uIiwiZW5kRGF0ZVRpbWUiLCJhZ2VSZXF1aXJlZCIsImV4cGVyaWVuY2VSZXF1aXJlZCIsIm1hdGVyaWFsc1JlcXVpcmVkIiwiY29zdCIsImxvY2F0aW9uIiwidGlja2V0c0F2YWlsYWJsZSIsImZpbHRlcmVkRXZlbnRzIiwidHJpbSIsInNlYXJjaFRlcm0iLCJ0b0xvd2VyQ2FzZSIsImZpbHRlciIsImluY2x1ZGVzIiwiZXZlbnREYXRlIiwiRGF0ZSIsImRheU9mV2VlayIsInRvTG9jYWxlRGF0ZVN0cmluZyIsIndlZWtkYXkiLCJldmVudFRpbWUiLCJ0b0xvY2FsZVRpbWVTdHJpbmciLCJob3VyMTIiLCJob3VyIiwibWludXRlIiwic2VsZWN0ZWRBZ2VSYXRpbmdzIiwic3BsaXQiLCJtYXAiLCJyYXRpbmciLCJzb21lIiwic2VsZWN0ZWRFdmVudFR5cGVzIiwidHlwZSIsIm1heFBhcnRpY2lwYW50c051bSIsImlzTmFOIiwidG90YWxFdmVudHMiLCJsZW5ndGgiLCJwYWdpbmF0ZWRFdmVudHMiLCJzbGljZSIsInRvdGFsUGFnZXMiLCJNYXRoIiwiY2VpbCIsInN0YXR1cyIsImpzb24iLCJldmVudHMiLCJwYWdpbmF0aW9uIiwiY3VycmVudFBhZ2UiLCJoYXNOZXh0UGFnZSIsImhhc1ByZXZQYWdlIiwiY291bnQiLCJ0YWtlIiwiZXJyb3IiLCJjb25zb2xlIiwic2V0SGVhZGVyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/events.ts\n");

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fevents&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cevents.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();